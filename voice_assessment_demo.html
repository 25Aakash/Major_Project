<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeuroLearn - Voice Assessment Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .profile-selection {
            margin-bottom: 30px;
        }

        .profile-selection h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .profile-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .profile-btn {
            padding: 20px;
            border: 3px solid #e0e0e0;
            border-radius: 15px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .profile-btn:hover {
            border-color: #667eea;
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .profile-btn.active {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .profile-btn .icon {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .profile-btn .name {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .profile-btn .desc {
            font-size: 0.9em;
            opacity: 0.8;
        }

        .assessment-area {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .question-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            border-left: 5px solid #667eea;
        }

        .question-text {
            font-size: 1.5em;
            color: #333;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .voice-controls {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .voice-btn {
            flex: 1;
            min-width: 200px;
            padding: 20px;
            border: none;
            border-radius: 15px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .mic-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .mic-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        .mic-btn.listening {
            animation: pulse 1.5s infinite;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .speak-btn {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .speak-btn:hover {
            transform: scale(1.05);
        }

        .next-btn {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            color: white;
        }

        .next-btn:hover {
            transform: scale(1.05);
        }

        .response-display {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            min-height: 100px;
        }

        .response-display.has-content {
            border-color: #43e97b;
        }

        .response-label {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }

        .response-text {
            font-size: 1.2em;
            color: #333;
            line-height: 1.6;
        }

        .status-bar {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .status-icon {
            font-size: 1.5em;
        }

        .results-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
        }

        .results-card h2 {
            font-size: 2.5em;
            margin-bottom: 20px;
        }

        .results-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .stat-card {
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
        }

        .stat-value {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .accommodations-list {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            text-align: left;
        }

        .accommodations-list h3 {
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .accommodations-list ul {
            list-style: none;
        }

        .accommodations-list li {
            padding: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }

        .accommodations-list li:last-child {
            border-bottom: none;
        }

        .restart-btn {
            background: white;
            color: #667eea;
            padding: 15px 40px;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            margin-top: 30px;
            transition: all 0.3s ease;
        }

        .restart-btn:hover {
            transform: scale(1.05);
        }

        .accessibility-note {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
        }

        .progress-bar {
            background: #e0e0e0;
            height: 8px;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress-fill {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100%;
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üé§ NeuroLearn Voice Assessment</h1>
            <p>Adaptive Voice-Based Learning Assessment</p>
        </div>

        <div class="content">
            <!-- Profile Selection -->
            <div class="profile-selection" id="profileSection">
                <h2>Select Your Learning Profile</h2>
                <div class="profile-buttons">
                    <div class="profile-btn" onclick="selectProfile('dyslexia')">
                        <div class="icon">üìñ</div>
                        <div class="name">Dyslexia</div>
                        <div class="desc">Reading difficulties</div>
                    </div>
                    <div class="profile-btn" onclick="selectProfile('adhd')">
                        <div class="icon">‚ö°</div>
                        <div class="name">ADHD</div>
                        <div class="desc">Attention challenges</div>
                    </div>
                    <div class="profile-btn" onclick="selectProfile('autism')">
                        <div class="icon">üß©</div>
                        <div class="name">Autism</div>
                        <div class="desc">Communication preferences</div>
                    </div>
                    <div class="profile-btn" onclick="selectProfile('dyscalculia')">
                        <div class="icon">üî¢</div>
                        <div class="name">Dyscalculia</div>
                        <div class="desc">Math difficulties</div>
                    </div>
                </div>
            </div>

            <!-- Assessment Area -->
            <div class="assessment-area" id="assessmentArea">
                <div class="accessibility-note" id="accessibilityNote">
                    <strong>üîä Voice Mode Active:</strong> Questions will be read aloud. Click the microphone to speak your answer.
                </div>

                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                </div>

                <div class="status-bar">
                    <div class="status-item">
                        <span class="status-icon">üë§</span>
                        <span id="profileName">Profile</span>
                    </div>
                    <div class="status-item">
                        <span class="status-icon">üìù</span>
                        <span id="questionCounter">Question 1/5</span>
                    </div>
                </div>

                <div class="question-card">
                    <div class="question-text" id="questionText">
                        Loading question...
                    </div>
                </div>

                <div class="response-display" id="responseDisplay">
                    <div class="response-label">Your Response:</div>
                    <div class="response-text" id="responseText">
                        Click the microphone and speak your answer...
                    </div>
                </div>

                <div class="voice-controls">
                    <button class="voice-btn mic-btn" id="micBtn" onclick="startListening()">
                        üé§ Click to Speak
                    </button>
                    <button class="voice-btn speak-btn" onclick="speakQuestion()">
                        üîä Repeat Question
                    </button>
                    <button class="voice-btn next-btn" onclick="nextQuestion()">
                        ‚û°Ô∏è Next Question
                    </button>
                </div>
            </div>

            <!-- Results Section -->
            <div class="assessment-area" id="resultsSection" style="display: none;">
                <div class="results-card">
                    <h2>üéâ Assessment Complete!</h2>
                    <p style="font-size: 1.2em; margin-bottom: 20px;">
                        Great job! Here are your personalized recommendations.
                    </p>

                    <div class="results-stats">
                        <div class="stat-card">
                            <div class="stat-value" id="completionRate">100%</div>
                            <div class="stat-label">Completion Rate</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="engagementScore">85</div>
                            <div class="stat-label">Engagement Score</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="voiceAccuracy">92%</div>
                            <div class="stat-label">Voice Recognition</div>
                        </div>
                    </div>

                    <div class="accommodations-list">
                        <h3>üéØ Recommended Accommodations</h3>
                        <ul id="accommodationsList"></ul>
                    </div>

                    <button class="restart-btn" onclick="restartAssessment()">
                        üîÑ Try Another Profile
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentProfile = '';
        let currentQuestion = 0;
        let questions = [];
        let responses = [];
        let recognition = null;
        let synthesis = window.speechSynthesis;

        // Speech Recognition Setup
        if ('webkitSpeechRecognition' in window) {
            recognition = new webkitSpeechRecognition();
            recognition.continuous = false;
            recognition.interimResults = false;
            recognition.lang = 'en-US';

            recognition.onresult = function(event) {
                const transcript = event.results[0][0].transcript;
                document.getElementById('responseText').textContent = transcript;
                document.getElementById('responseDisplay').classList.add('has-content');
                responses[currentQuestion] = transcript;
                document.getElementById('micBtn').classList.remove('listening');
                document.getElementById('micBtn').innerHTML = 'üé§ Click to Speak';
            };

            recognition.onerror = function(event) {
                console.error('Speech recognition error:', event.error);
                document.getElementById('micBtn').classList.remove('listening');
                document.getElementById('micBtn').innerHTML = 'üé§ Click to Speak';
            };
        }

        // Question banks for different profiles
        const questionBanks = {
            dyslexia: [
                "What is your favorite subject in school?",
                "How do you prefer to learn new things?",
                "What helps you understand lessons better?",
                "Do you like listening to stories or watching videos?",
                "What would make reading easier for you?"
            ],
            adhd: [
                "What activities help you focus best?",
                "How long can you concentrate on one task?",
                "What kind of breaks help you learn better?",
                "Do you prefer short lessons or long ones?",
                "What makes you most interested in learning?"
            ],
            autism: [
                "What topics are you most interested in?",
                "Do you prefer learning alone or with others?",
                "What helps you feel comfortable while learning?",
                "How do you like information presented to you?",
                "What makes a good learning environment for you?"
            ],
            dyscalculia: [
                "What math concepts do you find challenging?",
                "Do visual aids help you understand math better?",
                "How do you prefer to solve math problems?",
                "What makes math easier to understand?",
                "Do you prefer word problems or number problems?"
            ]
        };

        function selectProfile(profile) {
            currentProfile = profile;
            questions = questionBanks[profile];
            currentQuestion = 0;
            responses = [];

            // Update UI
            document.querySelectorAll('.profile-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.closest('.profile-btn').classList.add('active');

            // Show assessment
            setTimeout(() => {
                document.getElementById('profileSection').style.display = 'none';
                document.getElementById('assessmentArea').style.display = 'block';
                document.getElementById('profileName').textContent = profile.charAt(0).toUpperCase() + profile.slice(1);
                loadQuestion();
                
                // Automatically speak the first question
                setTimeout(() => speakQuestion(), 500);
            }, 300);
        }

        function loadQuestion() {
            if (currentQuestion < questions.length) {
                document.getElementById('questionText').textContent = questions[currentQuestion];
                document.getElementById('questionCounter').textContent = `Question ${currentQuestion + 1}/${questions.length}`;
                document.getElementById('responseText').textContent = 'Click the microphone and speak your answer...';
                document.getElementById('responseDisplay').classList.remove('has-content');
                
                // Update progress
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById('progressFill').style.width = progress + '%';
            } else {
                showResults();
            }
        }

        function startListening() {
            if (!recognition) {
                alert('Speech recognition is not supported in your browser. Please use Chrome.');
                return;
            }

            document.getElementById('micBtn').classList.add('listening');
            document.getElementById('micBtn').innerHTML = 'üé§ Listening...';
            recognition.start();
        }

        function speakQuestion() {
            if (synthesis.speaking) {
                synthesis.cancel();
            }

            const utterance = new SpeechSynthesisUtterance(questions[currentQuestion]);
            utterance.rate = 0.9;
            utterance.pitch = 1;
            synthesis.speak(utterance);
        }

        function nextQuestion() {
            if (!responses[currentQuestion]) {
                alert('Please provide a response first!');
                return;
            }

            currentQuestion++;
            loadQuestion();
            
            // Automatically speak next question
            if (currentQuestion < questions.length) {
                setTimeout(() => speakQuestion(), 500);
            }
        }

        function showResults() {
            document.getElementById('assessmentArea').style.display = 'none';
            document.getElementById('resultsSection').style.display = 'block';

            // Calculate scores
            const completionRate = 100;
            const engagementScore = 75 + Math.floor(Math.random() * 20);
            const voiceAccuracy = 85 + Math.floor(Math.random() * 15);

            document.getElementById('completionRate').textContent = completionRate + '%';
            document.getElementById('engagementScore').textContent = engagementScore;
            document.getElementById('voiceAccuracy').textContent = voiceAccuracy + '%';

            // Accommodations based on profile
            const accommodations = {
                dyslexia: [
                    '‚úì Audio narration for all text content',
                    '‚úì OpenDyslexic font option enabled',
                    '‚úì Text-to-speech with adjustable speed',
                    '‚úì Video content prioritized over text',
                    '‚úì Extended time for reading tasks',
                    '‚úì High contrast color schemes'
                ],
                adhd: [
                    '‚úì Break reminders every 15 minutes',
                    '‚úì Short 10-15 minute lesson modules',
                    '‚úì Gamified interactive content',
                    '‚úì Immediate feedback on tasks',
                    '‚úì Progress tracking and rewards',
                    '‚úì Minimal distractions interface'
                ],
                autism: [
                    '‚úì Clear, structured lesson plans',
                    '‚úì Visual schedules and routines',
                    '‚úì Reduced animations and transitions',
                    '‚úì Option for solo learning mode',
                    '‚úì Predictable content organization',
                    '‚úì Sensory-friendly color palettes'
                ],
                dyscalculia: [
                    '‚úì Visual math tools and manipulatives',
                    '‚úì Step-by-step problem breakdown',
                    '‚úì Calculator tools available',
                    '‚úì Real-world math context',
                    '‚úì Extra practice problems',
                    '‚úì Verbal math problem explanations'
                ]
            };

            const list = document.getElementById('accommodationsList');
            list.innerHTML = '';
            accommodations[currentProfile].forEach(item => {
                const li = document.createElement('li');
                li.textContent = item;
                list.appendChild(li);
            });

            // Speak results
            setTimeout(() => {
                const resultsText = `Assessment complete! Your engagement score is ${engagementScore} out of 100. We've identified ${accommodations[currentProfile].length} personalized accommodations for your learning profile.`;
                const utterance = new SpeechSynthesisUtterance(resultsText);
                synthesis.speak(utterance);
            }, 1000);
        }

        function restartAssessment() {
            document.getElementById('resultsSection').style.display = 'none';
            document.getElementById('profileSection').style.display = 'block';
            document.querySelectorAll('.profile-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            currentProfile = '';
            currentQuestion = 0;
            responses = [];
        }

        // Initialize
        if (!('webkitSpeechRecognition' in window)) {
            document.getElementById('accessibilityNote').innerHTML = 
                '<strong>‚ö†Ô∏è Note:</strong> For best experience, please use Google Chrome browser for voice recognition.';
        }
    </script>
</body>
</html>
